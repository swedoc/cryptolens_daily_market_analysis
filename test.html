<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:8000/ -->
<html lang="sv"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>1D Crypto Dashboard</title>
  <style>
    :root{
      --bg:#0b0b0f; --fg:#e6e6e6; --muted:#9aa0a6;
      --card:#121218; --border:#1d1d27;
      --up:#00c853; --down:#ff5252;
      --accent:#5e6ad2;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font:400 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    header,footer{max-width:1200px; margin:0 auto; padding:16px;}
    header{
      display:flex; align-items:center; gap:12px; justify-content:space-between; flex-wrap:wrap;
      border-bottom:1px solid var(--border);
    }
    h1{margin:0; font-weight:700; letter-spacing:.2px; font-size:clamp(18px,2.4vw,26px)}
    .sub{color:var(--muted); font-size:clamp(12px,1.6vw,14px)}
    .btn{
      border:1px solid var(--border); background:#0f1020; color:#e7e9ff;
      padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600;
    }
    .btn:active{transform:translateY(1px)}
    main{max-width:1200px; margin:0 auto; padding:16px;}
    .layout{ display:grid; gap:16px; grid-template-columns:1fr minmax(280px,.9fr); align-items:start; }
    @media (max-width:900px){ .layout{ grid-template-columns:1fr; } }
    .grid{ display:grid; gap:12px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
    .card{
      border:1px solid var(--border); background:var(--card); border-radius:14px; padding:14px;
      display:flex; flex-direction:column; gap:8px; min-height:120px;
    }
    .row{display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap}
    .title{font-weight:700}
    .symbol{font-size:clamp(14px,2vw,16px); letter-spacing:.4px}
    .name{color:var(--muted); font-size:clamp(12px,1.6vw,13px)}
    .price{font-size:clamp(18px,3vw,24px); font-weight:700}
    .change{font-weight:700}
    .up{color:var(--up)} .down{color:var(--down)}
    .extras{color:var(--muted); font-size:clamp(12px,1.6vw,13px)}
    footer{color:var(--muted); border-top:1px solid var(--border); font-size:13px}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .small{color:var(--muted); font-size:12px}
  </style>
<style type="text/css"></style><style type="text/css" id="operaUserStyle"></style></head>
<body>
  <header>
    <div>
      <h1>1D Crypto Dashboard</h1>
      <div class="sub">Senast uppdaterad: <span id="updated">2025-09-07 13:35:40</span></div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button id="refresh" class="btn">Uppdatera data</button>
      <button id="loadAnalysis" class="btn">Ladda analys</button>
    </div>
  </header>

  <main>
    <section class="layout">
      <section>
        <div class="grid" id="grid" aria-live="polite"><article class="card">
          <div class="row title">
            <span class="symbol">BTC</span>
            <span class="name">Bitcoin</span>
          </div>
          <div class="row price">$111,261.63</div>
          <div class="row change up">+0.52% (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $647.71M</span>
            <span>H/L: $109,977‚Äì$111,377.19</span>
          </div>
        </article><article class="card">
          <div class="row title">
            <span class="symbol">ETH</span>
            <span class="name">Ethereum</span>
          </div>
          <div class="row price">$4,305.99</div>
          <div class="row change up">+0.32% (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $919.98M</span>
            <span>H/L: $4,236‚Äì$4,315.35</span>
          </div>
        </article><article class="card">
          <div class="row title">
            <span class="symbol">SOL</span>
            <span class="name">Solana</span>
          </div>
          <div class="row price">$203.31</div>
          <div class="row change up">+0.61% (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $270.86M</span>
            <span>H/L: $199.32‚Äì$203.97</span>
          </div>
        </article><article class="card">
          <div class="row title">
            <span class="symbol">BNB</span>
            <span class="name">BNB</span>
          </div>
          <div class="row price">$871.57</div>
          <div class="row change up">+1.43% (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $114.63M</span>
            <span>H/L: $856.59‚Äì$874.44</span>
          </div>
        </article><article class="card">
          <div class="row title">
            <span class="symbol">XRP</span>
            <span class="name">XRP</span>
          </div>
          <div class="row price">$2.832</div>
          <div class="row change up">+1.08% (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $86.92M</span>
            <span>H/L: $2.793‚Äì$2.837</span>
          </div>
        </article><article class="card">
          <div class="row title">
            <span class="symbol">SUI</span>
            <span class="name">Sui</span>
          </div>
          <div class="row price">$3.393</div>
          <div class="row change up">+1.57% (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $37.83M</span>
            <span>H/L: $3.314‚Äì$3.4</span>
          </div>
        </article></div>
      </section>
      <aside class="card" id="analysis" aria-live="polite"><h2 style="margin:0 0 8px 0">Dagens 24h-analys</h2><section style="margin-bottom:12px"><strong>üåê Marknads√∂versikt:</strong><br>Sentimentet √§r svagt positivt. BTC i sidled, ETH marginellt upp. Volatiliteten d√§mpad.</section><section style="margin-bottom:12px"><strong>üîç Signaler &amp; utl√∂sare:</strong><ul style="margin:6px 0 0 18px;padding:0"><li>Sm√• nettoinfl√∂den till st√∂rre BTC-pl√•nb√∂cker.</li><li>ETF-fl√∂den n√§ra noll, men inte negativa.</li><li>Large-cap alts visar selektiv styrka; bredden fortfarande begr√§nsad.</li></ul></section><section style="margin-bottom:12px"><strong>üß† Tolkning &amp; m√∂nster:</strong><br>Bas-scenario: range med bias upp√•t s√• l√§nge BTC h√•ller g√•rdagens VWAP och 1D-st√∂d.</section><section style="margin-bottom:12px"><strong>üè∑Ô∏è Taggar:</strong> #Bitcoin #Ethereum #Volatility #Liquidity</section><section style="margin-bottom:12px"><strong>üìé K√§llor:</strong> <a href="https://api.binance.com/api/v3/ticker/24hr" target="_blank" rel="noopener">Binance 24hr ticker</a> ‚Ä¢ <a href="https://glassnode.com/" target="_blank" rel="noopener">Glassnode (√∂versikt)</a></section><div style="color:#9aa0a6;font-size:12px;border-top:1px solid #1d1d27;padding-top:8px">Denna sammanfattning √§r strukturerad analys, inte finansiell r√•dgivning.</div></aside>
    </section>
  </main>

  <footer>
    Datak√§lla: Binance 24hr ticker. Analysen √§r informationsunderlag, inte finansiell r√•dgivning.
  </footer>

  <script>
    // Mappa till USDT-par p√• Binance
    const ASSETS = [
      { name:"Bitcoin",   symbol:"BTC", pair:"BTCUSDT" },
      { name:"Ethereum",  symbol:"ETH", pair:"ETHUSDT" },
      { name:"Solana",    symbol:"SOL", pair:"SOLUSDT" },
      { name:"BNB",       symbol:"BNB", pair:"BNBUSDT" },
      { name:"XRP",       symbol:"XRP", pair:"XRPUSDT" },
      { name:"Sui",       symbol:"SUI", pair:"SUIUSDT" }
    ];

    const $grid = document.getElementById('grid');
    const $updated = document.getElementById('updated');
    const $refresh = document.getElementById('refresh');
    const $analysis = document.getElementById('analysis');
    const $loadAnalysis = document.getElementById('loadAnalysis');

    function nf(opts){ return new Intl.NumberFormat('en-US', opts); }
    const fmtPrice   = v => nf({maximumFractionDigits: v<1 ? 6 : v<100 ? 3 : 2}).format(v);
    const fmtPct     = v => (v>=0?'+':'') + nf({maximumFractionDigits:2}).format(v) + '%';
    const fmtCompact = v => nf({notation:'compact', maximumFractionDigits:2}).format(v);

    function renderBinance(tickers){
      $grid.innerHTML = '';
      ASSETS.forEach(a => {
        const d = tickers[a.pair] || {};
        const last = Number(d.lastPrice ?? 0);
        const chg  = Number(d.priceChangePercent ?? 0);
        const dir  = chg >= 0 ? 'up' : 'down';
        const volQuote = Number(d.quoteVolume ?? 0); // USDT-volym
        const high = Number(d.highPrice ?? 0);
        const low  = Number(d.lowPrice ?? 0);

        const el = document.createElement('article');
        el.className = 'card';
        el.innerHTML = `
          <div class="row title">
            <span class="symbol">${a.symbol}</span>
            <span class="name">${a.name}</span>
          </div>
          <div class="row price">$${fmtPrice(last)}</div>
          <div class="row change ${dir}">${fmtPct(chg)} (24h)</div>
          <div class="row extras">
            <span>Vol 24h: $${fmtCompact(volQuote)}</span>
            <span>H/L: $${fmtPrice(low)}‚Äì$${fmtPrice(high)}</span>
          </div>
        `;
        $grid.appendChild(el);
      });
      $updated.textContent = new Date().toLocaleString('sv-SE', { hour12:false });
    }

    async function loadBinance(){
      // Binance endpoint f√∂r flera symboler i ett anrop
      const symbols = encodeURIComponent(JSON.stringify(ASSETS.map(a => a.pair)));
      const url = `https://api.binance.com/api/v3/ticker/24hr?symbols=${symbols}`;
      try{
        const res = await fetch(url, { cache:'no-store' });
        if(!res.ok) throw new Error(res.status + ' ' + res.statusText);
        const arr = await res.json();
        // Indexera p√• symbol f√∂r enkel uppslagning
        const bySym = Object.fromEntries(arr.map(o => [o.symbol, o]));
        renderBinance(bySym);
      }catch(err){
        console.error('Binance API-fel:', err);
        // Fallback: visa placeholders s√• layouten lever
        const bySym = {};
        ASSETS.forEach(a => bySym[a.pair] = { lastPrice:0, priceChangePercent:0, quoteVolume:0, highPrice:0, lowPrice:0 });
        renderBinance(bySym);
      }
    }

    async function loadAnalysis(){
      try{
        const res = await fetch('analysis.json', { cache:'no-store' });
        if(!res.ok) throw new Error(res.status + ' ' + res.statusText);
        const payload = await res.json();
        // St√∂d f√∂r b√•de v√•r HTML-variant och en ‚Äúren‚Äù JSON med nycklar
        if (Array.isArray(payload.html)) {
          $analysis.innerHTML = payload.html.join('');
        } else if (payload.overview || payload.signals || payload.interpretation) {
          const parts = [];
          parts.push("<h2 style='margin:0 0 8px 0'>Dagens 24h-analys</h2>");
          if (payload.overview) parts.push(`<section style='margin-bottom:12px'><strong>üåê Marknads√∂versikt:</strong><br>${payload.overview}</section>`);
          if (payload.signals)  parts.push(`<section style='margin-bottom:12px'><strong>üîç Signaler & utl√∂sare:</strong><ul style='margin:6px 0 0 18px;padding:0'>${payload.signals.map(s=>`<li>${s}</li>`).join('')}</ul></section>`);
          if (payload.interpretation) parts.push(`<section style='margin-bottom:12px'><strong>üß† Tolkning & m√∂nster:</strong><br>${payload.interpretation}</section>`);
          if (payload.tags) parts.push(`<section style='margin-bottom:12px'><strong>üè∑Ô∏è Taggar:</strong> ${payload.tags.join(' ')}</section>`);
          if (payload.sources) parts.push(`<section style='margin-bottom:12px'><strong>üìé K√§llor:</strong> ${payload.sources.map(s=>`<a href="${s.url}" target="_blank" rel="noopener">${s.title}</a>`).join(' ‚Ä¢ ')}</section>`);
          parts.push("<div style='color:#9aa0a6;font-size:12px;border-top:1px solid #1d1d27;padding-top:8px'>Denna sammanfattning √§r strukturerad analys, inte finansiell r√•dgivning.</div>");
          $analysis.innerHTML = parts.join('');
        } else {
          $analysis.innerHTML = '<div class="small">Tom analysfil.</div>';
        }
      }catch(err){
        console.error('Analys-fel:', err);
        $analysis.innerHTML = '<div class="small">Kunde inte l√§sa analysis.json.</div>';
      }
    }

    $refresh.addEventListener('click', loadBinance);
    $loadAnalysis.addEventListener('click', loadAnalysis);
    // Ladda direkt vid start
    loadBinance();
  </script>


</body></html>
